<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{customer/fragments/head :: head}">





</head>

<body>
	<header th:replace="~{customer/fragments/header :: header}">


	</header>
	<main>

		<div class="container product-container mt-5">
			<div class="row">
				<!-- H√¨nh ·∫£nh s·∫£n ph·∫©m -->
				<div class="col-md-6 text-center">
					<img th:src="@{'/upload/' + ${sanPham.hinhAnh}}" alt="H√¨nh ·∫£nh s·∫£n ph·∫©m"
						class="img-fluid product-image" style="max-height: 400px;">
				</div>
				<!-- Th√¥ng tin s·∫£n ph·∫©m -->
				<div class="col-md-6 product-info">
					<h2 th:text="${sanPham.tenSanPham}">T√™n s·∫£n ph·∫©m</h2>
					<!--<p th:text="${sanPham.moTa}">M√¥ t·∫£ s·∫£n ph·∫©m...</p>-->

					<!-- Hi·ªÉn th·ªã th√¥ng tin khuy·∫øn m√£i -->
					<!-- Hi·ªÉn th·ªã th√¥ng tin khuy·∫øn m√£i -->
					<div class="promotion-info" th:if="${sanPhamKhuyenMaiMap[sanPham.maSanPham] != null}">
						<span class="discount-label">Gi·∫£m gi√°: </span>
						<span style="color: #2ecc71; font-weight: bold; margin-bottom: 5px;"
							th:text="${sanPhamKhuyenMaiMap[sanPham.maSanPham].phanTramGiamGia} + '%'">
						</span>
					</div>


					<!-- Hi·ªÉn th·ªã gi√° s·∫£n ph·∫©m -->
					<div class="product-price mt-2">
						<span th:if="${sanPhamKhuyenMaiMap[sanPham.maSanPham] != null}">
							<span class="original-price me-2"
								style="color: #e74c3c; text-decoration: line-through; font-family: 'Arial', sans-serif; font-weight: 400; letter-spacing: 0.5px;"
								th:text="${sanPham.donGiaBan} + ' VND'"></span>
							<span class="final-price"
								style="color: #000000; font-weight: bold; font-family: 'Arial', sans-serif; letter-spacing: 0.5px; font-size: 1.2em;"
								th:text="${sanPhamGiaSauGiamMap[sanPham.maSanPham]} + ' VND'"></span>
						</span>
						<span th:if="${sanPhamKhuyenMaiMap[sanPham.maSanPham] == null}" class="final-price"
							style="color:#e74c3c; font-weight: bold; font-family: 'Arial', sans-serif; letter-spacing: 0.5px; font-size: 1.2em;"
							th:text="${sanPham.donGiaBan} + ' VND'"></span>
					</div>



					<!-- S·ªë l∆∞·ª£ng s·∫£n ph·∫©m -->
					<div class="product-quantity mt-3">
						<label for="quantity" class="form-label">S·ªë l∆∞·ª£ng:</label>
						<input type="number" id="quantity" name="quantity" value="1" min="1" class="form-control w-25"
							oninput="if(this.value < 1) this.value = 1;">
					</div>

					<!-- N√∫t th√™m v√†o gi·ªè h√†ng v√† y√™u th√≠ch -->
					<div class="mt-3">
						<button class="btn btn-warning add-to-cart me-2">
							Th√™m v√†o gi·ªè h√†ng <!--üõí-->
							<span class="iconify" data-icon="uil:shopping-cart" data-inline="false"></span>
						</button>
						<button class="btn btn-outline-danger btn-wishlist">
							Y√™u th√≠ch
							<span class="iconify" data-icon="uil:heart" data-inline="false"></span>
						</button>
					</div>
				</div>

			</div>

			<!-- M√¥ t·∫£ chi ti·∫øt s·∫£n ph·∫©m -->
			<div class="row mt-5">
				<div class="col-md-6">
					<h3>M√¥ t·∫£ chi ti·∫øt s·∫£n ph·∫©m</h3>
					<p th:text="${sanPham.moTa}" style="text-align: justify;">
						<!-- M√¥ t·∫£ chi ti·∫øt c·ªßa s·∫£n ph·∫©m s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->

					</p>
				</div>
				<div class="col-md-6 " style="float: right;">
				<h3>S·∫£n ph·∫©m li√™n quan</h3>
				<div class="related-products-list row row-cols-1 row-cols-md-1 g-4">
					<div th:each="relatedSanPham : ${relatedSanPhams}" class="col mb-4">

						<div class="product-item card h-100" style="position: relative; overflow: hidden; 
		             width: 200px;
		            height: 320px; 
		             margin: 10px;
		            
		            transition: transform 0.3s ease, box-shadow 0.3s ease;"
							onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0px 4px 15px rgba(0, 0, 0, 0.2)';"
							onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none';
            
           				 ">
							<!-- Badge Khuy·∫øn m√£i cho s·∫£n ph·∫©m li√™n quan -->
							<span class="badge bg-success position-absolute m-3"
								th:if="${relatedSanPhamKhuyenMaiMap[relatedSanPham.maSanPham] != null}"
								th:text="'-' + ${relatedSanPhamKhuyenMaiMap[relatedSanPham.maSanPham].phanTramGiamGia} + '%'">
							</span>

							<!-- Wishlist Icon (Heart) -->
							<a href="#" class="btn-wishlist heart-icon" style="position: absolute; top: 10px; right: 10px; 
			              border: 2px solid #0000; border-radius: 50%; 
			              padding: 5px; display: flex; align-items: center; 
			              justify-content: center; color: #ff5e5e; 
			              background-color: #ffffff; 
			              transition: background-color 0.3s ease, color 0.3s ease; 
			              font-size: 1.2rem; cursor: pointer;"
								onmouseover="this.style.backgroundColor='#ff5e5e'; this.style.color='#fff'; this.querySelector('svg').style.fill='#fff';"
								onmouseout="this.style.backgroundColor='transparent'; this.style.color='#ff5e5e'; this.querySelector('svg').style.fill='transparent';
                
               				 ">

								<svg width="24" height="24">
									<use xlink:href="#heart"></use>
								</svg>
							</a>

							<!-- Product Image -->
							<figure>
								<a th:href="@{'/product/' + ${relatedSanPham.maSanPham}}" title="Product Title">
									<img th:src="@{'/upload/' + ${relatedSanPham.hinhAnh}}"
										class="tab-image card-img-top" alt="Related Product Image">
								</a>
							</figure>

							<!-- Product Details -->
							<div class="card-body">
								<h4 th:text="${relatedSanPham.tenSanPham}" style="font-size: 0.9rem; 
                    margin: 5px 0; white-space: nowrap; 
                    overflow: hidden; text-overflow: ellipsis;">
									T√™n s·∫£n ph·∫©m li√™n quan</h4>
								<span class="qty" th:text="${relatedSanPham.donViTinh.tenDonVi}">ƒê∆°n v·ªã</span>
								<span class="rating">
									<svg width="24" height="24" class="text-primary">
										<use xlink:href="#star-solid"></use>
									</svg> 4.5
								</span>

								<!-- Price with Promotion -->
								<p th:if="${sanPhamKhuyenMaiMap[relatedSanPham.maSanPham] != null}" class="text-danger">
									<span th:text="${relatedSanPham.donGiaBan} + ' VND'"
										style="text-decoration: line-through;"></span>
									<span th:text="${sanPhamGiaSauGiamMap[relatedSanPham.maSanPham]} + ' VND'"></span>
								</p>
								<p th:if="${relatedSanPhamKhuyenMaiMap[relatedSanPham.maSanPham] == null}"
									th:text="${relatedSanPham.donGiaBan} + ' VND'"
									style="font-weight: 600; font-family: Arial, sans-serif; color: #000;">
									Gi√° g·ªëc
								</p>
								<!-- Gi√° sau khi gi·∫£m cho s·∫£n ph·∫©m li√™n quan -->
								<!-- Hi·ªÉn th·ªã gi√° sau khi gi·∫£m n·∫øu c√≥ khuy·∫øn m√£i -->
								<p th:if="${relatedSanPhamKhuyenMaiMap[relatedSanPham.maSanPham] != null}">
									<span th:text="${relatedSanPham.donGiaBan} + ' VND'"
										style="text-decoration: line-through; color: red;"></span>
									<span th:text="${relatedSanPhamGiaSauGiamMap[relatedSanPham.maSanPham]} + ' VND'"
										style="font-weight: 600; font-family: Arial, sans-serif; color: #000;">
									</span>
								</p>

								<!-- S·ªë l∆∞·ª£ng s·∫£n ph·∫©m v√† n√∫t th√™m v√†o gi·ªè h√†ng -->
								<div class="product-quantity-container d-flex align-items-center mt-3">
									<label for="quantity" class="form-label me-2"></label>

									<!-- √î nh·∫≠p s·ªë l∆∞·ª£ng -->
									<input type="number" id="quantity" name="quantity" value="1" min="1"
										class="form-control quantity-input me-3" style="width: 50px;
									border: 2px solid #000;" oninput="if(this.value < 1) this.value = 1;">

									<!-- N√∫t th√™m v√†o gi·ªè h√†ng -->
									<button class="btn btn-warning add-to-cart">
										<span class="iconify" data-icon="uil:shopping-cart" data-inline="false"
											style="font-size: 1.5rem; margin-right: 5px;"></span>

									</button>
								</div>


							</div>

						</div>
					</div>
				</div>
			</div>
			</div>
			
			
		</div>



		</div>








	</main>


	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const quantityInput = document.getElementById('quantity');

			// H√†m gi·∫£m s·ªë l∆∞·ª£ng
			function decreaseQuantity() {
				let currentValue = parseInt(quantityInput.value) || 1;
				quantityInput.value = Math.max(1, currentValue - 1);
			}

			// H√†m tƒÉng s·ªë l∆∞·ª£ng
			function increaseQuantity() {
				let currentValue = parseInt(quantityInput.value) || 1;
				quantityInput.value = currentValue + 1;
			}

			// G√°n s·ª± ki·ªán cho n√∫t gi·∫£m v√† tƒÉng s·ªë l∆∞·ª£ng
			document.querySelector(".quantity-left-minus").addEventListener("click", decreaseQuantity);
			document.querySelector(".quantity-right-plus").addEventListener("click", increaseQuantity);

			// Ki·ªÉm tra khi ng∆∞·ªùi d√πng nh·∫≠p tay v√†o input
			quantityInput.addEventListener("input", function () {
				// N·∫øu gi√° tr·ªã nh·ªè h∆°n 1 ho·∫∑c kh√¥ng ph·∫£i l√† s·ªë th√¨ ƒë·∫∑t l·∫°i v·ªÅ 1
				quantityInput.value = quantityInput.value < 1 || isNaN(quantityInput.value) ? 1 : quantityInput.value;
			});
		});
	</script>




	<footer th:replace="customer/fragments/footer :: footer"></footer>
	<div th:replace="~{customer/fragments/script :: script}"></div>
</body>



<style>
	.heart-icon:hover {
		background-color: #ff5e5e;
		color: #fff;
	}

	.heart-icon:hover svg {
		fill: #fff;
	}

	.related-products-list {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		/* Hi·ªÉn th·ªã 3 s·∫£n ph·∫©m m·ªói h√†ng */
		gap: 20px;
		/* Kho·∫£ng c√°ch gi·ªØa c√°c s·∫£n ph·∫©m */
	}

	.related-product-item {
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		transition: transform 0.2s ease, box-shadow 0.3s ease;
		background-color: #fff;
		border-radius: 10px;
	}

	.card {
		text-decoration: none;
		color: inherit;
		/* Gi·ªØ m√†u ch·ªØ t·ª± nhi√™n */
	}

	.card:hover {
		transform: scale(1.05);
		box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
	}



	.promotion-info .discount-percent {
		color: #e63946;
		/* M√†u ƒë·ªè ƒë·∫≠m ƒë·ªÉ n·ªïi b·∫≠t ph·∫ßn trƒÉm gi·∫£m gi√° */
		font-weight: bold;
	}

	.product-price .final-price {
		color: #e63946;
		/* M√†u ƒë·ªè cho gi√° sau khi gi·∫£m */
		font-weight: bold;
	}

	.product-quantity .form-control {
		max-width: 100px;
		/* Gi·∫£m k√≠ch th∆∞·ªõc khung s·ªë l∆∞·ª£ng */
	}

	.add-to-cart {
		background-color: #ffb703;
		color: #fff;
		border: none;
	}

	.add-to-cart:hover {
		background-color: #faa307;
		color: #fff;
	}
</style>

</html>